<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Story Upload</title>

    <!--íŒì—… ìŠ¤íƒ€ì¼-->
    <style>
      *{
        padding: 0;
        margin: 0;
      }
      body {
        font-family: Arial, sans-serif;
      }

      .main-menu nav {
        display: flex;
        flex-direction: row;
        gap: 5px;
        align-items: center;
        justify-content: center;
      }
      .main-menu button {
        width: 100px;
        height: 50px;
        display: flex;
        border: none;
        font-weight: bold;
        cursor: pointer;
        transition: background-color 0.3s ease;
        justify-content: center;
        align-items: center;
      }

      .user-status {
        display: flex;
        align-items: center;
      }
      .user-status span {
        margin-left: auto;
      }
      .hidden {
        display: none;
      }
      .popup,
      .search-box {
        border: 1px solid #ccc;
        padding: 10px;
        background: #f9f9f9;
        position: absolute;
        z-index: 1000;
      }
      #text-input:focus {
        color: black;
      }
    </style>
  </head>
    <header>

      <div>
        <!--í™ˆí˜ì´ì§€ ë©”ì¸ë¡œê³ -->
        <div class="top-left-button-container">
          <button id="image-button">
                <img src="/Logo.png" alt="ë²„íŠ¼ ì´ë¯¸ì§€">
          </button>
        <button>ID</button>
      </div>

      <!--ë©”ë‰´-->
      <div class="main-menu">
        <nav>
          <button type="button" onclick="location.href='/weStory'">ìŠ¤í† ë¦¬</button>
          <button type="button" onclick="location.href='/community'">ì»¤ë®¤ë‹ˆí‹°</button>
          <button type="button" onclick="location.href='/benefits'">ì—¬í–‰í˜œíƒ</button>
        </nav>
      </div>
        
      <!--ë¡œê·¸ì¸-->
      <div id="auth-container">
        <span id="user-status">ë¡œê·¸ì¸</span>
          <button id="logout-button" 
                  style="display: none;">ë¡œê·¸ì•„ì›ƒ
          </button>

    <!--ë¡œê·¸ì¸ ë™ì‘-->
    <script>
      document.addEventListener('DOMContentLoaded',()=>{
          const userStatusSpan = document.getElementById('user-status');
          const logoutButton = document.getElementById('logout-button');

          //ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¼ ë³€ê²½ë¨
          function updateAuthDisplay(){
              const loggedInUser = localStorage.getItem('loggedInUser');

              if(loggedInUser){
                  //ë¡œê·¸ì¸ ìƒíƒœì¼ ê²½ìš°
                  userStatusSpan.textContent = loggedInUser;
                  logoutButton.style.display ='inline-block';
                  userStatusSpan.style.cursor ='pointer';
              } else {
                  //ë¡œê·¸ì•„ì›ƒ ìƒíƒœì¼ ê²½ìš°
                  userStatusSpan.textContent ='ë¡œê·¸ì¸';
                  logoutButton.style.display ='none';
                  userStatusSpan.style.cursor ='pointer';
              }
          }
          userStatusSpan.addEventListener('click',()=>{
            const loggedInUser = localStorage.getItem('loggedInUser');

            if(loggedInUser){
              //ë¡œê·¸ì¸ ìƒíƒœì¼ ê²½ìš° ë§ˆì´í˜ì´ì§€ë¡œ ì´ë™
              window.location.href = '/mypage'
            } else {
                //ë¡œê·¸ì•„ì›ƒ ìƒíƒœì¼ ê²½ìš° ë¡œê·¸ì¸ì²˜ë¦¬
                const userId = prompt('ì‚¬ìš©ì IDë¥¼ ì…ë ¥í•˜ì„¸ìš”');

                if(userId){
                    localStorage.setItem('loggedInUser',userId);
                    updateAuthDisplay();
                    alert('${userId}ë‹˜, ë°˜ê°‘ìŠµë‹ˆë‹¤ğŸ˜ƒ');
                }else{
                    //ì…ë ¥ ì·¨ì†Œ
                    alert('ë¡œê·¸ì¸ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤');
                }
            }
          })
          // ë¡œê·¸ì•„ì›ƒ
          logoutButton.addEventListener('click',()=>{
              localStorage.removeItem('loggedInUser');
              updateAuthDisplay();
              alert('ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤');
          })
          //ì´ˆê¸° ë¡œê·¸ì¸ ìƒíƒœë¡œ ë³µêµ¬
          updateAuthDisplay();
      })
  </script>
      </div>  
      </nav>
    </header>
    
    <div class="writeStory">
    <!--ìŠ¤í† ë¦¬ ì‘ì„± ì´ˆê¸° í™”ë©´-->
    <input
      id="text-input"
      type="text"
      value="ë‹¹ì‹ ì˜ ì´ì•¼ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”."
      onclick="clearInput(this)"/><br>
    <!--ìŠ¤í† ë¦¬ ì‘ì„±í•˜ê³ ì í´ë¦­í•˜ë©´ ê¸°ì¡´ ê¸€ì ì‚¬ë¼ì§€ê¸°-->
    <script>
      function clearInput(el){
        if(el.value.includes("ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”"))
        el.value="";
      }
    </script>
    
    <!--ì‚¬ì§„/ë™ì˜ìƒ ì—…ë¡œë“œ ë²„íŠ¼-->
    <label>ì‚¬ì§„/ë™ì˜ìƒ
      <input type="file" accept="image/*,video/*" />  
      </label>
  
    <!--my planner ì™€ ì—°ê²°-->
    <label>Myí”Œë˜ë„ˆ
      <input type="file" accept="image/*"/>
    </label>

    <!--ë§í¬-->
    <label>ë§í¬
      <input type="url" placeholder="ì—¬í–‰í”Œë˜ë„ˆ URL ì…ë ¥"/>
    </label>
   
  </div>

  <!--ê³µê°œ ë²”ìœ„ ì„ íƒ-->
  <select id="visibility">
    <option value="public">ì „ì²´ê³µê°œ</option>
    <option value="partial">ì¼ë¶€ê³µê°œ</option>
    <option value="private">ë¹„ê³µê°œ</option>
  </select>
 
  <!--ëŒ“ê¸€ ê¸°ëŠ¥ ì„ íƒ-->
  <select id="comments">
    <option value="allow">ëŒ“ê¸€ í—ˆìš©</option>
    <option value="deny">ëŒ“ê¸€ ë¹„í—ˆìš©</option>
  </select>
 
  <!--ë‹¤ë¥¸ ì‚¬ìš©ì ê²€ìƒ‰ & íƒœê·¸-->
  <button onclick="showTagSerch()">ğŸª•</button>
  <div id="search-box"
       class="search-box hidden">
       í•¨ê»˜í•˜ëŠ” ì¹œêµ¬ ì°¾ê¸°<br>
       <nav class="lets bg-body-tertiary">
          <form class="containar-fluid">
              <div class="input-group">
                  <span class="input-group-text"
                        id="basic-addon1">ğŸª•</span>
                  <input type="text"
                         class="form-control"
                         placeholder="@ì•„ì´ë””"
                         aria-label="Username"
                         aria-describedby="basic-addon1">
              </div>
          </form>

       </nav>
  </div>
  <script>
      function clearInput(el){
        if(el.value.includes("ì°¾ê¸°ğŸª•"))
        el.value="";
      }
      function showTagSerch(){
        document.getElementById("search-box").classList.toggle("hidden");}

      function searchUser(query){
        document.getElementById("search-results").innerHTML="ê²€ìƒ‰ ì¤‘"+query;}
  </script>

  <!--ìœ„ì¹˜ê¸°ë°˜ ì„œë¹„ìŠ¤ íŒì—…-->
  <button onclick="togglePopup()">ğŸ“Œ</button>
      <div id="popup" class="popup hidden">
          ì‘ì„± ì¤‘ì¸ ìŠ¤í† ë¦¬ê°€ ë³´ì—¬ì§€ëŠ” ë™ì•ˆ<br>
          'ìŠ¤í† ë¦¬'ì—ì„œ ì‚¬ìš©ìì˜ ìœ„ì¹˜ì—<br>
          ì ‘ê·¼í•˜ë„ë¡ í—ˆìš©í•˜ì‹œê² ìŠµë‹ˆê¹Œ?<br>
          ì‚¬ìš©ìì˜ ë°ì´í„°ëŠ” ê°œì¸í™”ëœ ê´‘ê³  ì œê³µ ëª©ì ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.<br>
        <button onclick="setLocationPerMission(true)">í—ˆìš©</button>
        <button onclick="setLocationPerMission(false)">ë¹„í—ˆìš©</button>
      </div>
      <script>
         function togglePopup(){
           document.getElementById("popup").classList.toggle("hidden");
         }
         function setLocationPerMission(allowed){
            alert(allowed ? "ìœ„ì¹˜ ì ‘ê·¼ í—ˆìš©ë¨" : "ìœ„ì¹˜ ì ‘ê·¼ ë¹„í—ˆìš©ë¨");
            document/getElementById("popup").classList.add("hidden");
         }
      </script>

  <!--ì·¨ì†Œ/ì˜¬ë¦¬ê¸° ë²„íŠ¼-->
  <button onclick="cancelPost()">ì·¨ì†Œ</button>
    <script>
         function cancelPost(){
            alert("ì‘ì„± ë‚´ìš©ì´ ì„ì‹œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
            window.location.href="/weShow.html"; //ìŠ¤í† ë¦¬ ë©”ì¸ í™”ë©´ìœ¼ë¡œ ì´ë™
         } 
    </script>
  <button onclick="submitPost()">ì˜¬ë¦¬ê¸°</button>
    <script>
         function submitPost(){
            alert("ìŠ¤í† ë¦¬ê°€ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.");
            window.location.href="/weShow.html"; //ìŠ¤í† ë¦¬ ë©”ì¸ ë©”ì¸í™”ë©´ìœ¼ë¡œ ì´ë™
         } 
    </script>

    <footer>
      <nav>
        <a href="/tripPlanneer">ì—¬í–‰í”Œë˜ë„ˆ</a>
        <a href="/announcement">ê³µì§€ì‚¬í•­</a>
        <a href="/privacyPolicy">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
        <a href="/customerServiceCenter">ê³ ê°ì„¼í„°</a>
      </nav>
      <nav>
        <a href="/termsOfUse">ì´ìš©ì•½ê´€</a>
        <a href="/termsOfUseForLocationBasedServices">ìœ„ì¹˜ê¸°ë°˜ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€</a>
        <a href="/copyrightProtectionPolicy">ì €ì‘ê¶Œ ë³´í˜¸ì •ì±…</a>
        <a href="/customerServiceSite">ê³ ê°ì„œë¹„ìŠ¤í˜„ì¥</a>
        <a href="/refusalOfUnauthorizedCollectionOdEmail">ì „ììš°í¸ ë¬´ë‹¨ìˆ˜ì§‘ê±°ë¶€</a>
      </nav>
    </footer>
  </body>
</html>
